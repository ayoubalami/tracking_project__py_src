<!DOCTYPE html>
<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</head>

<body onload="initData()">

  <div class="container">
    <h1 class="p-2"> OBJECT DETECTION SERVER </h1>
    <div class="container px-4">
      <!-- <div class="row gx-5 mb-3">
            <div class="col input-group ">
              <span class="input-group-text" id="basic-addon3">https://www.youtube.com/watch?v=</span>
              <input type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
            </div>
            <div class="col input-group">

              <select id="videoFileSelect" class="form-select" aria-label=" select video">
                <option value="file" title="Video File">Video File</option>
                <option value="webcam" title="Live WebCam">Live WebCam</option>
                <option value="youtube" title="Youtube">Youtube</option>
              </select>
            </div>
          </div> -->

      <div class="row gx-5">
        <div class="col input-group">
          <div class="btn-group me-2 w-25" role="group" aria-label="First group">
            <button class="p-2 btn btn-success btn-lg " onclick="onClickToggleStopStart()" id="startStopButton"> Start
            </button>
          </div>
          <div class="btn-group me-2 w-25 " role="group" aria-label="First group">
            <button class="p-2 btn btn-primary btn-lg " disabled onclick="onClickReset()" id="resetButton"> Reset
            </button>
          </div>
          <div class="btn-group mx-5 w-10" role="group" aria-label="First group">
            <button class="p-2 btn btn-warning btn-md " onclick="onClickStartOfflineDetection()"
              id="offlineDetectionButton">
              <span class="spinner-border spinner-border-sm " style="display: none" role="status"
                aria-hidden="true"></span>
              Start offline detection
            </button>
          </div>
        </div>
        <div class="col input-group">
          <select id="objectDetectionSelect" onchange="onChangeObjectDetection()" class="p-2 form-select"
            aria-label="Default select example">
          </select>
          <button class="p-2 btn btn-success btn-md w-25" type="button" onclick="onClickLoadModel()"
            id="loadModelButton">
            <span class="spinner-border spinner-border-sm " style="display: none" role="status"
              aria-hidden="true"></span>
            load model
          </button>
        </div>
      </div>

      
      <div class="row ">
        <div class="col input-group">
          <h5 id="selectModelText">
            Aucun modele de detection charg√©
          </h5>
        </div>
      </div>

    </div>

    <div class="accordion accordion-flush" id="accordionFlushDetectorParams">
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingOne">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseDetectorParams" aria-expanded="false" aria-controls="flush-collapseDetectorParams">
            <h4>
              Detector parametres
            </h4>
          </button>
        </h2>
        <div id="flush-collapseDetectorParams" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushDetectorParams">
          <div class="accordion-body">
              <div class="row my-1">
                <div  class="col" style="display: flex; flex-direction: column; width: 76%;">
                  <!-- width: 58%; -->
                  <img id="mainStreamFrame"  />
                  <!-- style="width:1150px" -->
                </div>   
                <div class="col">
                  <div class="col input-group py-3">
                    <h5 class="me-3" style="align-self: cente">threshold : </h5>
                    <code>
                      <h4 id="thresholdValueText"> 0.5 </h4>
                    </code>
                    <input type="range" onchange="updateThresholdValue()" min="0" max="1" value="0.5" step="0.1"
                      class="slider w-100" id="thresholdSlider">
                  </div>
                  <div class="col input-group py-3">
                    <h5 class="me-3" style="align-self: cente">nms_threshold : </h5>
                    <code>
                      <h4 id="nmsThresholdValueText"> 0.5 </h4>
                    </code>
                    <input type="range" onchange="updateNmsThresholdValue()" min="0" max="1" value="0.5" step="0.1"
                      class="slider w-100" id="nmsThresholdSlider">
                  </div>
                </div>
                <!-- <div class="col input-group">
                  <h5 class="">nms_threshold</h5>
                  <input type="range" onchange="updateNmsThresholdValue()" min="0" max="1" value="0.5" step="0.1"
                    class="mx-4 slider" id="nmsThresholdSlider">
                  <h5 id="nmsThresholdValueText"> 0.5 </h5>
                </div> -->
              </div>      
           </div>
        </div>
      </div>
    </div>
    

    <!-- <div class="row">
      <div  class="col" style="display: flex; flex-direction: column; width: 58%;">
        <img id="mainStreamFrame" style="width:1150px" />
      </div>
    </div> -->
   
    <div class="accordion accordion-flush" id="accordionFlushBackgroundSub">
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingOne">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse-BackgroundSub" aria-expanded="false" aria-controls="flush-collapse-BackgroundSub">
            <h4>
              Background subtraction parametres
            </h4>
          </button>
        </h2>
        <div id="flush-collapse-BackgroundSub" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushBackgroundSub">
          <div class="accordion-body">
              <div class="row my-1">
                  <div  class="col" style="display: flex; flex-direction: column;width: 76%;">
                    <img id="secondStreamFrame" />
                    <img id="thirdStreamFrame" />
                  </div>
                
                  <div class="col">
                    <div class="col input-group py-3">
                      <h5 class="me-3" style="align-self: cente">varThreshold : </h5>
                      <code>
                        <h4 id="varThresholdValueText"> 16 </h4>
                      </code>
                      <input type="range" onchange="updateBackgroundSubtractionParamValue('varThreshold')" min="1" max="255" value="16" step="1"
                        class="slider w-100" id="varThresholdSlider">
                    </div>
                    <div class="col input-group py-3">
                      <h5 class="me-3" style="align-self: cente">history : </h5>
                      <code>
                        <h4 id="historyValueText"> 500 </h4>
                      </code>
                      <input type="range" onchange="updateBackgroundSubtractionParamValue('history')" min="0" max="1000" value="500" step="5"
                        class="slider w-100" id="historySlider">
                    </div>
                    <div class="col input-group py-3">
                      <h5 class="me-3" style="align-self: cente">morphologyEx iteration : </h5>
                      <code>
                        <h4 id="morphologicalExValueText"> 0 </h4>
                      </code>
                      <input type="range" onchange="updateBackgroundSubtractionParamValue('morphologicalEx')" min="0" max="5" value="0" step="1"
                        class="slider w-100" id="morphologicalExSlider">
                    </div>
                    <div class="col input-group py-3">
                      <h5 class="me-3" style="align-self: cente">kernel size : </h5>
                      <code>
                        <h4 id="kernelSizeValueText"> 5 </h4>
                      </code>
                      <input type="range" onchange="updateBackgroundSubtractionParamValue('kernelSize')" min="3" max="11" value="5" step="2"
                        class="slider w-100" id="kernelSizeSlider">
                    </div>
                    <div class="col input-group py-3">
                      <h5 class="me-3" style="align-self: cente">min detected area : </h5>
                      <code>
                        <h4 id="minBoxSizeValueText"> 1000 </h4>
                      </code>
                      <input type="range" onchange="updateBackgroundSubtractionParamValue('minBoxSize')" min="100" max="2500" value="1000" step="100"
                        class="slider w-100" id="minBoxSizeSlider">
                    </div>

                    
                  </div>
                     
                 
              </div>      
           </div>
        </div>
      </div>
    </div>
  
   


  </div>
</body>


</html>